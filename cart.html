<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
    <style>
        body {
            font-family: "Lato", sans-serif;
        }
        
        .show-cart li {
            display: flex;
        }
        
        .card {
            margin-bottom: 20px;
        }
        
        .card-img-top {
            width: 200px;
            height: 200px;
            align-self: center;
        }
        
        .sidenav {
            height: 100%;
            width: 0;
            position: fixed;
            z-index: 1;
            top: 0;
            right: 0;
            background-color: #F2F4F6;
            overflow-x: hidden;
            transition: 0.5s;
            padding-top: 60px;
        }
        
        .sidenav a {
            padding: 8px 8px 8px 32px;
            text-decoration: none;
            font-size: 18px;
            color: #0567B1;
            display: block;
            transition: 0.3s;
        }
        
        .sidenav a:hover {
            color: #f1f1f1;
        }
        
        .sidenav .closebtn {
            position: absolute;
            top: 0;
            right: 25px;
            font-size: 36px;
            margin-left: 50px;
        }
        
        @media screen and (max-height: 450px) {
            .sidenav {
                padding-top: 15px;
            }
            .sidenav a {
                font-size: 15px;
            }
        }
        
        .row {
            display: flex;
        }
        /* Left column (menu) */
        
        #mySearch {
            width: 40%;
            font-size: 18px;
            padding: 11px;
            border: 1px solid #ddd;
        }
        /* Style the navigation menu inside the left column */
        
        #myMenu {
            list-style-type: none;
            padding: 0;
            margin: 0;
        }
        
        #myMenu li a {
            padding: 12px;
            text-decoration: none;
            color: black;
            display: block
        }
        
        html,
        body {
            margin: 0;
            padding: 0;
        }
    </style>
</head>

<body>

    <div id="mySidenav" class="sidenav">
        <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
        <div style="background-color:#0567B1;  margin: 0;
        border: 1px solid black;
        width: 100%;
        height: 250px;
        box-sizing:border-box;
        -moz-box-sizing:border-box;
        -webkit-box-sizing:border-box;">
            <br>
            <img src="0.jpg" width=100% height=97px>

            <p style='margin-left:10px; color:white;font-size:18px;'><i class="fa fa-user"></i> Name</p>
            <p style='margin-left:10px; color:white;font-size:18px;'><i class="fa fa-envelope-square"></i> Email</p>
            <p style='margin-left:10px; color:white;font-size:18px;'><i class="fa fa-phone"></i> Ph.no</p>

        </div>


        <a href="#">Orders</a>
        <a href="#">Profiles</a>
        <a href="#">Contact Us</a>
        <hr>
        <a href="#" style='color:red;'>Signout</a>
    </div>

    <div style="background-color:#0567B1;  margin: 0;
    border: 1px solid black;
    width: 100%;
    height: 100px;
    box-sizing:border-box;
    -moz-box-sizing:border-box;
    -webkit-box-sizing:border-box;">

        <img src="0.jpg" width=19% height=97px>&nbsp;&nbsp;<b style="color:white;font-size:20px;"> India's First Advanced Local E-Market Platform</b>
        <span margin-bottom:2px;, style="font-size:30px;cursor:pointer;float:right;margin-right:15px;margin-bottom:20px; margin-top:20px" onclick="openNav()">   <i  style="color:white;"class="fa fa-user fa-lg"></i></span>
    </div><br>
    <center>
        <i class="fa fa-search fa-lg"> &nbsp;</i><input type="text" id="mySearch" onkeyup="myFunction()" placeholder="Search Items in the Shop.." title="Type in a category">
        <ul id="myMenu">
            <br>

            <div class="tab-content">
                <div class="tab-pane active" role="tabpanel" id="tab-1">
                    <div class="pulse animated" style="margin-bottom: 8%;width: 100%;padding: 10px;">

                        <div class="row justify-content-center" style="width: 80%;height: 100%;">

                            <div class="col" style="width: 80%;height: 100%;margin-top: 10px;margin-bottom: 10px;margin-left:25px">
                                <div class="card border rounded shadow-lg" style="width:100%;height: 100%;">
                                    <div class="card-body" style="min-width:800px;height: 100%;margin-left:10%">

                                        <a href="#" style="text-decoration:none;color:black;">
                                            <h4 class="card-title" style="float:left;">Dithonia Foods and Properties</h4>
                                            <br><br>
                                            <i class="fa fa-map-marker fa-lg" style="float:left;" aria-hidden="true">Address: 14b Ashok nagar,Janak Mahal Crossing, Dayal Bagh</i>
                                            <p style='color:green'>Delivering</p>
                                            <p style="float:left;">Phone No: 8907752352</p><br><br>
                                            <p style="float:left;">Order: Rs.299 to get free delivery</p><br><br>
                                            <p style="float:left;">Delivery Charges: Rs.25 </p><button class="btn btn-primary" data-toggle="modal" style=" background-color:#0567B1;  color: white; ">Check Location</button>
                                            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#cart">Cart (<span class="total-count"></span>)</button><button class="clear-cart btn btn-danger">Clear Cart</button>
                                        </a>

                                    </div>
                                </div>
                            </div>


                        </div>


                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row">
                    <div class="col">
                        <div class="card" style="width: 20rem;">
                            <img class="card-img-top" src="vegnoodles.jpg" alt="Card image cap">
                            <div class="card-block">
                                <h4 class="card-title">Veg Noodles</h4>
                                <p class="card-text">Per serve: Rs.60</p>
                                <a href="#" data-name="Veg Noodles" data-price="60" class="add-to-cart btn btn-primary">Add to cart</a>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <div class="card" style="width: 20rem;">
                            <img class="card-img-top" src="chiilipanner.jpg" alt="Card image cap">
                            <div class="card-block">
                                <h4 class="card-title">Chilli Paneer</h4>
                                <p class="card-text">Per serve: Rs.90</p>
                                <a href="#" data-name="Chilli Paneer" data-price="90" class="add-to-cart btn btn-primary">Add to cart</a>
                            </div>
                        </div>
                    </div>
                    <div class="col">
                        <div class="card" style="width: 20rem;">
                            <img class="card-img-top" src="friedrice.jpg" alt="Card image cap">
                            <div class="card-block">
                                <h4 class="card-title">Fried Rice</h4>
                                <p class="card-text">Per serve: Rs.90</p>
                                <a href="#" data-name="Fried Rice" data-price="90" class="add-to-cart btn btn-primary">Add to cart</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


            <div class="modal fade" id="cart" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog modal-lg" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">Cart</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                    </button>
                        </div>
                        <div class="modal-body">
                            <table class="show-cart table">

                            </table>
                            <div>Total price: Rs.<span class="total-cart"></span></div>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                            <button type="button" class="btn btn-primary">Order now</button>
                        </div>
                    </div>
                </div>
            </div>
        </ul>
    </center>
    <script>
        function openNav() {
            document.getElementById("mySidenav").style.width = "250px";
        }

        function closeNav() {
            document.getElementById("mySidenav").style.width = "0";
        }
    </script>
    <script>
        function myFunction() {
            var input, filter, ul, li, a, i;
            input = document.getElementById("mySearch");
            filter = input.value.toUpperCase();
            ul = document.getElementById("myMenu");
            li = ul.getElementsByTagName("li");
            for (i = 0; i < li.length; i++) {
                a = li[i].getElementsByTagName("a")[0];
                if (a.innerHTML.toUpperCase().indexOf(filter) > -1) {
                    li[i].style.display = "";
                } else {
                    li[i].style.display = "none";
                }
            }
        }
    </script>
    <script>
        var shoppingCart = (function() {
            cart = [];

            function Item(name, price, count) {
                this.name = name;
                this.price = price;
                this.count = count;
            }

            function saveCart() {
                sessionStorage.setItem('shoppingCart', JSON.stringify(cart));
            }

            function loadCart() {
                cart = JSON.parse(sessionStorage.getItem('shoppingCart'));
            }
            if (sessionStorage.getItem("shoppingCart") != null) {
                loadCart();
            }

            var obj = {};

            obj.addItemToCart = function(name, price, count) {
                for (var item in cart) {
                    if (cart[item].name === name) {
                        cart[item].count++;
                        saveCart();
                        return;
                    }
                }
                var item = new Item(name, price, count);
                cart.push(item);
                saveCart();
            }

            obj.setCountForItem = function(name, count) {
                for (var i in cart) {
                    if (cart[i].name === name) {
                        cart[i].count = count;
                        break;
                    }
                }
            };

            obj.removeItemFromCart = function(name) {
                for (var item in cart) {
                    if (cart[item].name === name) {
                        cart[item].count--;
                        if (cart[item].count === 0) {
                            cart.splice(item, 1);
                        }
                        break;
                    }
                }
                saveCart();
            }


            obj.removeItemFromCartAll = function(name) {
                for (var item in cart) {
                    if (cart[item].name === name) {
                        cart.splice(item, 1);
                        break;
                    }
                }
                saveCart();
            }


            obj.clearCart = function() {
                cart = [];
                saveCart();
            }

            // Count cart 
            obj.totalCount = function() {
                var totalCount = 0;
                for (var item in cart) {
                    totalCount += cart[item].count;
                }
                return totalCount;
            }

            obj.totalCart = function() {
                var totalCart = 0;
                for (var item in cart) {
                    totalCart += cart[item].price * cart[item].count;
                }
                return Number(totalCart.toFixed(2));
            }

            obj.listCart = function() {
                var cartCopy = [];
                for (i in cart) {
                    item = cart[i];
                    itemCopy = {};
                    for (p in item) {
                        itemCopy[p] = item[p];

                    }
                    itemCopy.total = Number(item.price * item.count).toFixed(2);
                    cartCopy.push(itemCopy)
                }
                return cartCopy;
            }


            return obj;
        })();


        $('.add-to-cart').click(function(event) {
            event.preventDefault();
            var name = $(this).data('name');
            var price = Number($(this).data('price'));
            shoppingCart.addItemToCart(name, price, 1);
            displayCart();
        });
        $('.clear-cart').click(function() {
            shoppingCart.clearCart();
            displayCart();
        });


        function displayCart() {
            var cartArray = shoppingCart.listCart();
            var output = "";
            for (var i in cartArray) {
                output += "<tr>" +
                    "<td>" + cartArray[i].name + "</td>" +
                    "<td>(" + cartArray[i].price + ")</td>" +
                    "<td><div class='input-group'><button class='minus-item input-group-addon btn btn-primary' data-name=" + cartArray[i].name + ">-</button>" +
                    "<input type='number' class='item-count form-control' data-name='" + cartArray[i].name + "' value='" + cartArray[i].count + "'>" +
                    "<button class='plus-item btn btn-primary input-group-addon' data-name=" + cartArray[i].name + ">+</button></div></td>" +
                    "<td><button class='delete-item btn btn-danger' data-name=" + cartArray[i].name + ">X</button></td>" +
                    " = " +
                    "<td>" + cartArray[i].total + "</td>" +
                    "</tr>";
            }
            $('.show-cart').html(output);
            $('.total-cart').html(shoppingCart.totalCart());
            $('.total-count').html(shoppingCart.totalCount());
        }



        $('.show-cart').on("click", ".delete-item", function(event) {
            var name = $(this).data('name')
            shoppingCart.removeItemFromCartAll(name);
            displayCart();
        })



        $('.show-cart').on("click", ".minus-item", function(event) {
            var name = $(this).data('name')
            shoppingCart.removeItemFromCart(name);
            displayCart();
        })

        $('.show-cart').on("click", ".plus-item", function(event) {
            var name = $(this).data('name')
            shoppingCart.addItemToCart(name);
            displayCart();
        })
        $('.show-cart').on("change", ".item-count", function(event) {
            var name = $(this).data('name');
            var count = Number($(this).val());
            shoppingCart.setCountForItem(name, count);
            displayCart();
        });

        displayCart();
    </script>
</body>

</html>
